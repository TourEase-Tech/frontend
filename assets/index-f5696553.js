var v=Object.defineProperty;var T=(n,s,r)=>s in n?v(n,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[s]=r;var b=(n,s,r)=>(T(n,typeof s!="symbol"?s+"":s,r),r);import{S as w,r as h,j as e,C as m,e as p,f as x,T as f,$ as y,u as E,m as S,H as F,B as N,o as L,p as k}from"./index-9f700162.js";import{I as D,a as I,D as q,b as A,F as B}from"./tour.rules-fa30ae12.js";import{u as P}from"./useQueryTourConfig-eaa35784.js";import{t as H}from"./tour.services-99c8afa2.js";import"./index-2db0ea2b.js";import"./lodash-c27996ad.js";import"./useQueryParam-6e7f31c2.js";class Q{constructor(s){b(this,"_query");this._query=w({queryKey:["tour",s],queryFn:()=>H.getDetailTour(s),enabled:s!==void 0,staleTime:3*60*1e3})}fetch(){var s;return(s=this._query.data)==null?void 0:s.data.data}isLoading(){return this._query.isLoading}}const M=({register:n,previewImage:s,onChange:r,errors:o,setValue:d,control:c,tour:a})=>{var u,g;return h.useEffect(()=>{a&&(d("name",a.name),d("destination",a.destination),d("images",a.images),d("departureLocation",a.departureLocation),d("period",a.period),d("price",a.price),d("departureDay",a.departureDay),d("description",a.description))},[a,d]),e.jsx(h.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-7 gap-4 mx-6",children:[e.jsxs("div",{className:"col-span-7 grid grid-cols-2 ",children:[e.jsx(D,{register:n,id:"name",name:"name",placeholder:"Tour name",className:"col-span-2",classNameInput:"w-full text-[#195E8E] text-[42px] font-bold placeholder:text-[42px] placeholder:text-[#195E8E] placeholder-bold bg-transparent outline-none",error:(u=o.name)==null?void 0:u.message}),e.jsx(D,{register:n,id:"destination",name:"destination",placeholder:"Destination",className:"col-span-2",classNameInput:"w-full text-black/90 text-[16px] placeholder:text-black/90 bg-transparent outline-none h-[28px]",error:(g=o.destination)==null?void 0:g.message})]}),e.jsx("div",{className:"col-span-7",children:e.jsx(I,{register:n,onChange:r,previewImage:s,avatar:a&&a.images})}),e.jsxs("div",{className:"col-span-7 grid grid-cols-2 gap-x-4 text-[14px] font-semibold text-gray-600 placeholder:text-black",children:[e.jsx(m,{name:"departureLocation",control:c,defaultValue:"",render:({field:{onChange:l,value:i=a&&a.departureDay},fieldState:{error:t}})=>e.jsx(p,{dateAdapter:x,children:e.jsxs("div",{children:[e.jsx(f,{id:"departureLocation",label:"Departure Location",value:i,placeholder:"Enter Location: Ex: Hanoi, Vietnam",className:"w-full bg-white",onChange:l}),e.jsx("span",{className:"block min-h-[16px] text-red-600 text-xs mt-1 font-medium",children:t==null?void 0:t.message})]})})}),e.jsx(m,{name:"period",control:c,defaultValue:"",render:({field:{onChange:l,value:i=a&&a.period},fieldState:{error:t}})=>e.jsx(p,{dateAdapter:x,children:e.jsxs("div",{children:[e.jsx(f,{id:"period",label:"Period",value:i,placeholder:"Enter Period",className:"w-full bg-white",onChange:l}),e.jsx("span",{className:"block min-h-[16px] text-red-600 text-xs mt-1 font-medium",children:t==null?void 0:t.message})]})})}),e.jsx(m,{name:"price",control:c,render:({field:{onChange:l,value:i=a&&a.price},fieldState:{error:t}})=>e.jsx(p,{dateAdapter:x,children:e.jsxs("div",{className:"pt-[8px]",children:[e.jsx(f,{id:"price",label:"Price",placeholder:"Enter price",value:i,className:"w-full bg-white",onChange:l}),e.jsx("span",{className:"block min-h-[16px] text-red-600 text-xs mt-1 font-medium",children:t==null?void 0:t.message})]})})}),e.jsx(m,{name:"departureDay",control:c,render:({field:{onChange:l,value:i=a&&a.departureDay},fieldState:{error:t}})=>{var j;return e.jsxs("div",{children:[e.jsx(p,{dateAdapter:x,children:e.jsx(q,{components:["DateTimeField"],children:e.jsx(A,{label:"Departure Day",format:"DD/MM/YYYY HH:mm",onChange:l,value:a?y(i):i!==void 0?y(i):null,className:"bg-white"})})}),e.jsxs("span",{className:"block min-h-[16px] text-red-600 text-xs mt-1 font-medium",children:[t&&t.message,(j=o.departureDay)==null?void 0:j.message]})]})}}),e.jsx(m,{name:"description",control:c,render:({field:{onChange:l,value:i=a&&a.description},fieldState:{error:t}})=>e.jsx(p,{dateAdapter:x,children:e.jsxs("div",{className:"col-span-2",children:[e.jsx(f,{id:"description",label:"Description",value:i,placeholder:"Enter Description",className:"w-full bg-white ",multiline:!0,rows:8,onChange:l}),e.jsx("span",{className:"block min-h-[16px] text-red-600 text-xs mt-1 font-medium",children:t==null?void 0:t.message})]})})})]})]})})},Y=()=>{const[n,s]=h.useState(),r=h.useMemo(()=>n?URL.createObjectURL(n):"",[n]),o=C=>{s(C)},d=E(),{register:c,control:a,setValue:u,formState:{errors:g}}=S({resolver:L(B)}),l=P(),t=new Q(l.id).fetch(),j=()=>{d({pathname:k.tour})};return e.jsxs(h.Fragment,{children:[e.jsxs(F,{children:[e.jsx("title",{children:"Edit Tour"}),e.jsx("meta",{name:"description",content:"This is edit tour page of the project"})]}),e.jsxs("form",{onSubmit:()=>{},children:[e.jsx(M,{register:c,previewImage:r,onChange:o,errors:g,setValue:u,control:a,tour:t}),e.jsxs("div",{className:"flex justify-end gap-6 mx-6",children:[e.jsx(N,{type:"button",classNameButton:"bg-gray-300 py-2 px-4 rounded-lg text-[14px] text-gray-800 font-semibold mt-6",onClick:j,children:"Cancel"}),e.jsx(N,{classNameButton:"bg-[#26C6DA] py-2 px-4 rounded-lg text-[14px] text-white font-semibold mt-6 w-[90px]",type:"submit",children:"Save"})]})]})]})},J=Y;export{J as default};
