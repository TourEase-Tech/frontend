var x=Object.defineProperty;var p=(r,t,s)=>t in r?x(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s;var d=(r,t,s)=>(p(r,typeof t!="symbol"?t+"":t,s),s);import{Z as h,S as y,j as e,u as f,r as g,H as j,L as b,p as m,X as N}from"./index-9f700162.js";import{u as c}from"./useQueryTourConfig-eaa35784.js";import{H as T,u as w,P as q}from"./Pagination-522b8e2c.js";import{t as _}from"./tour.services-99c8afa2.js";import{S as n}from"./index-2db0ea2b.js";import"./lodash-c27996ad.js";import"./useQueryParam-6e7f31c2.js";function C(r){return h(r).add(7,"hours").format("HH:mm DD/MM/YYYY")}class S{constructor(){d(this,"_query");d(this,"_queryTourConfig");this._queryTourConfig=c(),this._query=y({queryKey:["tours",this._queryTourConfig],queryFn:()=>_.getAllTours(this._queryTourConfig),keepPreviousData:!0,staleTime:3*60*1e3})}fetch(){var t;return(t=this._query.data)==null?void 0:t.data}getTotal(){var t;return(t=this._query.data)==null?void 0:t.data.total}isLoading(){return this._query.isLoading}}const D=[{id:"1",name:"Name",sort:"name"},{id:"2",name:"Location",sort:"departureLocation"},{id:"3",name:"Destination",sort:"destination"},{id:"4",name:"Departure Day",sort:"phonenumber"},{id:"5",name:"Price",sort:"price"}],L=({tours:r,onEditTour:t,isLoading:s,onSort:o})=>e.jsx("div",{children:e.jsxs("table",{className:"w-full bg-white text-left border-[1px] border-gray-200 p-2",children:[e.jsx(T,{header:D,onSort:o}),e.jsx("tbody",{children:s?Array(10).fill(0).map((a,i)=>e.jsxs("tr",{className:"text-[14px] text-gray-600 border-b-[1px] border-gray-200 cursor-pointer hover:bg-gray-50",children:[e.jsx("th",{className:"px-2 py-4 font-medium w-[30%]",children:e.jsx(n,{className:"h-[16px]",borderRadius:20})}),e.jsx("th",{className:"px-2 py-4 font-medium w-[17%]",children:e.jsx(n,{className:"h-[16px]",borderRadius:20})}),e.jsx("th",{className:"px-2 py-4 font-medium w-[17%]",children:e.jsx(n,{className:"h-[16px]",borderRadius:20})}),e.jsx("th",{className:"px-2 py-4 font-medium w-[17%]",children:e.jsx(n,{className:"h-[16px]",borderRadius:20})}),e.jsx("th",{className:"px-2 py-4 font-medium w-[17%]",children:e.jsx(n,{className:"h-[16px]",borderRadius:20})})]},i)):r&&r.data.data.map(a=>e.jsxs("tr",{className:"text-[14px] text-gray-600 border-b-[1px] border-gray-200 cursor-pointer hover:bg-gray-50",onClick:()=>t(a.id),children:[e.jsx("th",{className:"px-2 py-4 font-medium w-[30%] text-center",children:e.jsx("span",{className:"line-clamp-2 ",children:a.name})}),e.jsx("th",{className:"px-2 py-4 font-medium w-[17%] text-center",children:a.departureLocation}),e.jsx("th",{className:"px-2 py-4 font-medium w-[17%] text-center",children:a.destination}),e.jsx("th",{className:"px-2 py-4 font-medium w-[17%] text-center",children:C(a.departureDay)}),e.jsx("th",{className:"px-2 py-4 font-medium w-[17%] text-center truncate",children:a.price})]},a.id))})]})}),v=()=>{const r=c(),t=f(),s=w({queryConfig:r,pathname:m.tour}),o=new S,a=o.fetch(),i=o.getTotal();console.log(a);const u=l=>{t({pathname:m.edit_tour,search:N({id:l}).toString()},{state:r})};return e.jsxs(g.Fragment,{children:[e.jsxs(j,{children:[e.jsx("title",{children:"Tours"}),e.jsx("meta",{name:"description",content:"This is tours management page of the project"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(b,{to:m.create_tour,state:r,className:"flex max-w-max items-end justify-end text-[14px] font-semibold text-white bg-[#26C6DA] px-4 py-2 rounded-lg mb-4",children:"Create Tour"}),e.jsx(L,{tours:a,onEditTour:u,onSort:s.handleSort,isLoading:o.isLoading()}),i&&e.jsx(q,{className:"flex justify-end",queryConfig:r,total:i,pathname:m.tour})]})]})},F=v;export{F as default};
