var u=Object.defineProperty;var x=(s,t,r)=>t in s?u(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r;var d=(s,t,r)=>(x(s,typeof t!="symbol"?t+"":t,r),r);import{s as v,r as l,y as f,j as e,H as p,T as y,l as j}from"./index-2074f808.js";import{t as g}from"./tour.services-705c3134.js";import"./lodash-aa96f41f.js";import{S as w,P as F,N,a as T,T as M}from"./TourSlider-dba5a748.js";import{C as S}from"./CardTour-80117333.js";import"./forget_password.rules-0a818a35.js";import{C as V}from"./CircularProgress-8073ebda.js";class b{constructor(){d(this,"_query");this._query=v({queryKey:["myFavorite"],queryFn:()=>g.getMyFavorite(),keepPreviousData:!0,staleTime:3*60*1e3})}fetch(){var t;return(t=this._query.data)==null?void 0:t.data.data}}const C=()=>{const[s,t]=l.useState(""),[r,m]=l.useState([]),c=new b().fetch(),i=(c||[]).filter(a=>a.tour.name.toLowerCase().includes(s.toLowerCase())),n=f();return l.useEffect(()=>{(async()=>{try{const o=await fetch(`https://ai-c9ka.onrender.com/matrix_factorization?user_id=${n}`);if(!o.ok)throw new Error("Failed to fetch recommended tours");const h=await o.json();m(h.recommended_tours)}catch(o){j.error(o.message)}})()},[n]),e.jsxs(l.Fragment,{children:[e.jsxs(p,{children:[e.jsx("title",{children:"My Favorite"}),e.jsx("meta",{name:"description",content:"This is my favorite of the project"})]}),c&&r?e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("div",{className:"flex justify-between items-center px-6  pt-10",children:[e.jsx("h2",{className:"text-[30px] text-[#a1c19c]",children:"My Favorite"}),e.jsx(y,{label:"Search by name...",value:s,onChange:a=>t(a.target.value)})]}),e.jsx("div",{className:"overflow-hidden py-10 w-full px-4 ",children:e.jsxs(w,{slidesPerView:3,spaceBetween:50,navigation:!0,pagination:{clickable:!0},modules:[F,N],className:"px-6 !overflow-visible flex",children:[i&&i.length>0&&i.map((a,o)=>e.jsx(T,{children:e.jsx(S,{tour:a.tour})},o)),i&&i.length===0&&e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex rounded-full bg-[#c6f8ff] p-4",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",id:"calendar",className:"w-16 h-16",children:e.jsx("path",{d:"M53 5h-8v4H19V5h-8v4H0v50h64V9H53V5zm-6 2h4v6h-4V7zM13 7h4v6h-4V7zM2 57V19h60v38H2zm60-46v6H2v-6h9v4h8v-4h26v4h8v-4h9z"})})}),e.jsx("h1",{className:"mt-5 lg:text-[40px] md:text-[20px] max-md:text-[14px] font-bold text-slate-800 ",children:"No Tour Available"})]})})]})})]}),e.jsx(M,{heading:"Recomment Tour",tours:r})]}):e.jsx("div",{className:"flex items-center justify-center w-full h-[200px]",children:e.jsx(V,{color:"secondary",variant:"indeterminate"})})]})},Q=C;export{Q as default};
